{{define "9IPHP/article.html"}}
<!DOCTYPE html>
<html>
<head>
    {{template "head/head" .}}
    {{template "head/3rdstatistic" .}}
    {{template "head/article" .}}
</head>
{{template "9IPHP/header" .}}
<div class="main wrapper fn-clear">
    <div class="content">
        <article class="article__item">
            <header>
                <h2 class="article__title">
                    {{if .Article.Topped}}
                    <svg>
                        <use xlink:href="#focus"></use>
                    </svg>
                    {{end}}
                    {{.Article.Title}}
                </h2>
                <div class="article__meta">
                    {{if gt .UserCount 1}}
                    <a rel="nofollow"
                       class="avatar pipe-tooltipped pipe-tooltipped--w"
                       aria-label="{{.Article.Author.Name}}"
                       data-src="{{.Article.Author.AvatarURLWithSize 116}}"
                       href="{{.Article.Author.URL}}">
                    </a>
                    &nbsp; &nbsp;
                    {{end}}
                    <time class="ft-nowrap">
                        <svg>
                            <use xlink:href="#icon-date"></use>
                        </svg>
                        {{.Article.CreatedAt}}
                    </time>
                    &nbsp; | &nbsp;
                    <span class="ft-nowrap">
                        <svg><use xlink:href="#icon-view"></use></svg>
                        {{.Article.ViewCount}} {{$.I18n.View}}
                    </span>
                    {{if gt .Article.CommentCount 0}}
                    &nbsp; | &nbsp;
                    <a href="{{.Article.URL}}#pipeComments" class="fn-nowrap">
                        <svg>
                            <use xlink:href="#icon-cmts"></use>
                        </svg>
                        {{.Article.CommentCount}} {{$.I18n.Comment}}
                    </a>
                    {{end}}
                </div>
            </header>
            <section class="pipe-content__reset" id="articleContent"
                     data-author="{{.Article.Author.Name}}">
                {{.Article.Content}}
            </section>
            <div class="article__share fn-clear">
                {{range .Article.Tags}}
                <a class="tag" rel="tag" href="{{.URL}}">{{.Title}}</a>
                {{end}}

                <span class="share__btns">
                    <span class="share__btn share__btn--wechat" data-type="wechat">
                        <svg><use xlink:href="#wechat"></use></svg>
                    </span>
                    <span class="share__btn share__btn--weibo" data-type="weibo">
                        <svg><use xlink:href="#weibo"></use></svg>
                    </span>
                    <span class="share__btn share__btn--twitter" data-type="twitter">
                        <svg><use xlink:href="#twitter"></use></svg>
                    </span>
                    <span class="share__btn share__btn--google" data-type="google">
                        <svg><use xlink:href="#google"></use></svg>
                    </span>
                    <div class="share__code"
                         data-title="{{.Article.Title}}"
                         data-blogtitle="{{$.Setting.BasicBlogTitle}}"
                         data-url="{{.Article.URL}}"
                         data-avatar="{{.Article.Author.AvatarURLWithSize 128}}"></div>
                </span>
            </div>
            <div class="fn-clear article__more">
                {{if .PreviousArticle}}
                <a href="{{.PreviousArticle.URL}}"
                   class="pipe-tooltipped pipe-tooltipped--n first"
                   rel="prev" aria-label="{{.PreviousArticle.Title}}">
                    <svg class="near__icon">
                        <use xlink:href="#icon-chevron-left"></use>
                    </svg> {{.I18n.PreArticle}}
                </a>
                {{end}}

                {{if .NextArticle}}
                <a href="{{.NextArticle.URL}}" rel="next"
                   class="pipe-tooltipped pipe-tooltipped--n"
                   aria-label="{{.NextArticle.Title}}">
                    {{.I18n.NextArticle}}
                    <svg class="near__icon-last">
                        <use xlink:href="#icon-chevron-right"></use>
                    </svg>
                </a>
                {{end}}

                <span class="fn-right">
                    <a href="javascript:void(0)"
                        data-title="{{.I18n.Comment}}{{.I18n.Colon}}{{.Article.Title}}"
                       id="articleCommentBtn"
                       data-id="{{.Article.ID}}">
                        <svg>
                            <use xlink:href="#icon-cmts"></use>
                        </svg>
                        {{$.I18n.Comment}}
                    </a>
                    {{if .Article.Editable}}
                    <a href="{{$.Conf.Server}}/admin/articles/post?id={{.Article.ID}}">
                        <svg>
                            <use xlink:href="#icon-edit"></use>
                        </svg>
                        {{$.I18n.Edit}}
                    </a>
                    {{end}}
                </span>
            </div>
            <div class="fn-mg5"></div>
        </article>
        <div class="wrapper">
            {{template "comment/comments" .}}

            {{if or .PreviousArticle .NextArticle}}
            <div class="fn-bottom"></div>
            {{if gt .UserCount 1}}
            <div class="fn-clear article__near fn-two">
                {{if .PreviousArticle}}
                <a href="{{.PreviousArticle.URL}}" rel="prev">
                    <svg class="fn-absolute near__svg">
                        <use xlink:href="#chevron-left"></use>
                    </svg>
                    <span class="avatar pipe-tooltipped pipe-tooltipped--n fn-absolute"
                          aria-label="{{.PreviousArticle.Author.Name}}"
                          data-src="{{.PreviousArticle.Author.AvatarURLWithSize 128}}"></span>
                    <span class="near__title">
                     {{.I18n.PreArticle}}<br>
                    <b class="ft-break">{{.PreviousArticle.Title}}</b>
                </span>
                </a>
                {{end}}

                {{if .NextArticle}}
                <a href="{{.NextArticle.URL}}" rel="next"
                   class="near__next {{if .PreviousArticle}}{{else}}near__next--single{{end}}">
                    <svg class="fn-absolute near__svg">
                        <use xlink:href="#chevron-right"></use>
                    </svg>
                    <span class="avatar pipe-tooltipped pipe-tooltipped--n fn-absolute"
                          aria-label="{{.NextArticle.Author.Name}}"
                          data-src="{{.NextArticle.Author.AvatarURLWithSize 128}}"></span>
                    <span class="near__title">
                    {{.I18n.NextArticle}}<br>
                    <b class="ft-break">{{.NextArticle.Title}}</b>
                </span>
                </a>
                {{end}}
            </div>
            {{else}}
            {{end}}
            {{end}}
        </div>
        {{if gt (len .RecommendArticles) 0}}
        <div class="article__relevant">
            <div class="module__header">
                {{$.I18n.RecommendArticle}}
            </div>
            <div class="relevant__panel">
                {{range $index, $item := .RecommendArticles}}
                <div class="relevant__item">
                    {{if $item.ThumbnailURL}}
                    <a class="relevant__thumbnail"
                       href="{{$item.URL}}"
                       data-src="{{$item.ThumbnailURL}}"
                       target="_blank"></a>
                    <a class="module__list-title fn-ellipsis" href="{{$item.URL}}" target="_blank">{{$item.Title}}</a>
                    {{else}}
                    <a class="module__list-title fn-ellipsis" href="{{$item.URL}}" target="_blank">{{$item.Title}}</a>
                    <a href="{{$item.URL}} target=" _blank class="ft-fade relevant__abstract">
                        {{$item.Abstract}}
                    </a>
                    {{end}}
                    <div class="fn-relative">
                        <a class="avatar fn-absolute" data-src="{{$item.Author.AvatarURL}}"
                           href="{{$item.Author.URL}}" target="_blank"></a>
                        <div class="relevant__content">
                            <a href="{{$item.Author.URL}}" class="ft-gray" target="_blank">{{$item.Author.Name}}</a>
                            <br>
                            <span class="ft-12 ft-fade fn-clear">
                        {{$item.CreatedAt}}
                       <a href="{{$item.URL}}#comments" class="fn-right ft-fade" target="_blank">
                           {{if ne 0 $item.CommentCount}}
                           {{$item.CommentCount}}
                           {{$.I18n.Comment}}
                           {{else}}
                           {{$.I18n.Comment}}
                           <svg><use xlink:href="#comment"></use></svg>
                           {{end}}
                       </a>
                   </span>
                        </div>
                    </div>
                </div>
                {{end}}
            </div>
        </div>
        {{end}}

        {{template "comment/editor" .}}
    </div>
    {{template "9IPHP/side" .}}
</div>
{{template "9IPHP/footer" .}}
</html>
{{end}}